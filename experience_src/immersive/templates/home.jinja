{% extends "document.jinja" %}
{% set lang = "ja" %}
{% set vm = view_model %}
{% set site = vm.site %}
{% set title = site.title ~ " | Home" %}
{% set body_attrs = {
  "experience": experience.key,
  "template": template_key,
  "routes-href": routes_href,
} %}

{% block head_styles %}
    <link rel="stylesheet" href="{{ asset_prefix }}/assets/components.css">
{% endblock %}
{% block head_extra %}
    <meta name="description" content="{{ site.description }}">
    <meta property="og:title" content="{{ site.og.title }}">
    <meta property="og:description" content="{{ site.og.description }}">
{% endblock %}

{% block body %}
  <a class="sg-skip" href="#content">メインコンテンツへスキップ</a>
  <header class="sg-header">
    <nav
      class="sg-nav"
      data-experience="{{ experience.key }}"
      data-page-type="home"
      data-routes-href="{{ routes_href }}"
    >
      <ul class="sg-nav-links">
        {% for link in vm.nav.links %}
        <li><a href="{{ link.href }}">{{ link.label }}</a></li>
        {% endfor %}
      </ul>
      <button
        type="button"
        class="sg-toggle view-switcher"
        aria-pressed="false"
        data-action="switch-experience"
      >
        体験を切り替える
      </button>
    </nav>
    <p class="sg-eyebrow">Experience</p>
    <h1>{{ site.title }}</h1>
    <p class="sg-lede">{{ site.description }}</p>
    {% if vm.nav.actions %}
    <div class="sg-actions">
      {% for action in vm.nav.actions %}
      <a class="sg-button" href="{{ action.href }}">{{ action.label }}</a>
      {% endfor %}
    </div>
    {% endif %}
  </header>
  <main id="content" class="sg-main">
    <section class="sg-card" id="about">
      <h2>紹介</h2>
      <div class="immersive-stack">
        {% for about in vm.about_cards %}
        <article class="sg-card immersive-card" data-about-id="{{ about.id }}">
          <p class="sg-eyebrow">{{ about.role or "About" }}</p>
          <h2>{{ about.title }}</h2>
          <p class="sg-lede">{{ about.summary }}</p>
          {% if about.tags %}
          <p class="sg-meta">{{ about.tags | join(" / ") }}</p>
          {% endif %}
        </article>
        {% endfor %}
      </div>
    </section>
    <section class="sg-card" id="episodes">
      <h2>エピソード</h2>
      <div class="immersive-stack">
        {% for episode in vm.episodes %}
        <article class="sg-card immersive-card" data-episode-id="{{ episode.id }}">
          <p class="sg-eyebrow">Episode {{ "%02d"|format(episode.order) }}</p>
          <h2><a href="{{ episode.href }}">{{ episode.title }}</a></h2>
          {% if episode.summary %}
          <p class="sg-lede">{{ episode.summary }}</p>
          {% endif %}
          <p class="sg-meta">続きを読む →</p>
        </article>
        {% endfor %}
      </div>
    </section>
    <section class="sg-card" id="characters">
      <h2>キャラクター</h2>
      <div class="immersive-stack">
        {% for character in vm.characters %}
        <article class="sg-card immersive-card" data-character-id="{{ character.id }}">
          <p class="sg-eyebrow">{{ character.role or "Character" }}</p>
          <h2>{{ character.name }}</h2>
          <p class="sg-lede">{{ character.summary }}</p>
          {% if character.tags %}
          <p class="sg-meta">{{ character.tags | join(" / ") }}</p>
          {% endif %}
        </article>
        {% endfor %}
      </div>
    </section>
  </main>
  <footer class="sg-footer">
    <p>&copy; {{ site.title }}</p>
  </footer>
{% endblock %}
