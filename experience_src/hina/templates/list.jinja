{% extends "document.jinja" %}
{% set lang = "ja" %}
{% set vm = view_model %}
{% set site = vm.site %}
{% set title = site.title ~ " | List" %}
{% set body_attrs = {
  "experience": experience.key,
  "template": template_key,
  "routes-href": routes_href,
} %}

{% block head_styles %}
    <link rel="stylesheet" href="{{ asset_prefix }}/assets/components.css">
{% endblock %}

{% block body %}
  <header class="sg-header">
    <p class="sg-eyebrow">Listing</p>
    <h1>{{ site.title }} コンテンツ一覧</h1>
    <p class="sg-lede">{{ site.description }}</p>
    <nav class="sg-nav">
      <ul class="sg-nav-links">
        {% for link in vm.nav.links %}
        <li><a href="{{ link.href }}">{{ link.label }}</a></li>
        {% endfor %}
      </ul>
      <button
        type="button"
        class="view-switcher"
        data-action="switch-experience"
      >
        体験を切り替える
      </button>
    </nav>
  </header>
  <main class="sg-main" data-template="list" data-experience="{{ experience.key }}">
    <ul class="sg-list card-grid">
      {% for episode in vm.episodes %}
      <li class="sg-card" data-episode-id="{{ episode.id }}">
        <p class="sg-eyebrow">Episode {{ "%02d"|format(episode.order) }}</p>
        <h2><a href="{{ episode.href }}">{{ episode.title }}</a></h2>
        {% if episode.summary %}
        <p class="sg-lede">{{ episode.summary }}</p>
        {% endif %}
        <p class="sg-meta">#{{ episode.id }}</p>
      </li>
      {% endfor %}
    </ul>
  </main>
{% endblock %}
