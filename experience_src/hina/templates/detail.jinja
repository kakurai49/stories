{% extends "document.jinja" %}
{% set lang = "ja" %}
{% set vm = view_model %}
{% set site = vm.site %}
{% set title = content.title ~ " | " ~ site.title %}
{% set body_attrs = {
  "experience": experience.key,
  "template": template_key,
  "routes-href": routes_href,
  "content-id": content.content_id,
} %}

{% block head_styles %}
    <link rel="stylesheet" href="{{ asset_prefix }}/assets/components.css">
    {% if micro_css_href %}
    <link rel="stylesheet" href="{{ micro_css_href }}">
    {% endif %}
{% endblock %}
{% block head_extra %}
    <meta name="description" content="{{ content.summary or site.description }}">
    <meta property="og:title" content="{{ content.title }}">
    <meta property="og:description" content="{{ content.summary or site.description }}">
{% endblock %}

{% block body %}
  <article class="sg-article" data-template="detail" data-content-id="{{ content.content_id }}" data-routes-href="{{ routes_href }}">
    <header class="sg-header" data-tts="ignore">
      <p class="sg-eyebrow">Detail</p>
      <h1>{{ content.title }}</h1>
      {% if content.summary %}
      <p class="sg-lede">{{ content.summary }}</p>
      {% endif %}
      <nav class="sg-nav">
        <ul class="sg-nav-links">
        {% for link in nav_links %}
        <li><a href="{{ link.href }}">{{ link.label }}</a></li>
        {% endfor %}
      </ul>
      <button
        type="button"
        class="view-switcher"
        data-action="switch-experience"
      >
        体験を切り替える
      </button>
      </nav>
    </header>
    <section class="sg-main" data-content-body>
      {% if content.render.kind == 'html' %}
      {{ content.render.html | safe }}
      {% elif content.render.kind == 'markdown' %}
      <div class="sg-markdown">{{ content.render.markdown | replace('\n', '<br>') | safe }}</div>
      {% elif content.render.kind == 'external' %}
      <p class="sg-lede">外部コンテンツとして提供されています。</p>
      <p><a href="{{ content.render.url }}">{{ content.render.caption or content.render.url }}</a></p>
      {% endif %}
    </section>
    <footer class="sg-meta">
      <p>コンテンツ ID: {{ content.content_id }}</p>
    </footer>
  </article>
{% endblock %}
