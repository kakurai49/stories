<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第7話「全部は試せない、という優しさ」</title>
    <link rel="stylesheet" href="pop3_style.css">
    <!-- KaTeX CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <style>
        /* 追加スタイル: コントラスト強化とカラフルな要素 */
        body {
            background: linear-gradient(135deg, #ffdd57 0%, #ff4081 50%, #1e90ff 100%);
            background-attachment: fixed;
        }
        
        .story-container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 30px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .story-container::before {
            content: "";
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, #ff4081, #1e90ff, #ffdd57, #ff4081);
            z-index: -1;
            border-radius: 20px;
            animation: borderGlow 3s infinite linear;
        }
        
        @keyframes borderGlow {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
        
        h1 {
            color: #ff4081;
            text-align: center;
            font-size: 2.5rem;
            text-transform: uppercase;
            text-shadow: 3px 3px 0 #ffdd57;
            margin-bottom: 30px;
            position: relative;
            display: inline-block;
            padding: 0 20px;
        }
        
        h1::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 10%;
            width: 80%;
            height: 5px;
            background: linear-gradient(to right, #ff4081, #1e90ff, #ffdd57);
            border-radius: 5px;
        }
        
        .summary-box {
            background: linear-gradient(135deg, #ffdd57 0%, #ffcc00 100%);
            border: 3px dashed #ff4081;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 5px 5px 0 #ff4081;
        }
        
        .summary-box h2 {
            color: #ff4081;
            margin-top: 0;
            font-size: 1.8rem;
            text-shadow: 2px 2px 0 white;
        }
        
        .dialogue {
            background-color: #f0f8ff;
            border-left: 5px solid #1e90ff;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
            box-shadow: 3px 3px 5px rgba(0,0,0,0.1);
        }
        
        .character-name {
            font-weight: bold;
            color: #ff4081;
            display: block;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        .math-box {
            background-color: #f8f8f8;
            border: 2px solid #1e90ff;
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }
        
        .highlight {
            background-color: #ffdd57;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        /* preコード内のバグ修正 */
        pre {
            background-color: #2d2d2d !important;
            color: #f8f8f2 !important;
            border: 2px solid #ff4081 !important;
            padding: 15px !important;
            border-radius: 10px !important;
            overflow-x: auto !important;
            white-space: pre-wrap !important;
            word-wrap: break-word !important;
            font-family: 'Courier New', Courier, monospace !important;
            max-width: 100% !important;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5) !important;
            margin: 20px 0 !important;
        }
        
        /* フッタースタイル調整 */
        .footer {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #ff4081 0%, #1e90ff 100%);
            color: white;
            position: relative;
            bottom: 0;
            width: 100%;
            margin-top: 40px;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* レスポンシブ調整 */
        @media (max-width: 768px) {
            .story-container {
                padding: 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <header>
        第7話「全部は試せない、という優しさ」
    </header>

    <div class="story-container">
        <div class="summary-box">
            <h2>◆前回までのあらすじ</h2>
            <p>魔界歓楽街のサキュバスメイド喫茶《∞（インフィニティ）》で、新人テストエンジニアとして働き始めた結城ユイ──ユイリアは、場当たり運営で炎上しかけたオープン初夜を、伝説のテストアーキテクト・神崎ナギに救われる。クレームを「三つの客パターン」に整理してみせたナギに、「テストは世界の見方を設計する仕事」と教えられ、その背中に強く憧れる。</p>
            <p>その後、店先で通行人を観察し「世界 W は仕様書の外側まで含む」と知り、イベント準備ではばらばらに見える客たちを同値クラスとしてまとめる感覚を掴む。社畜救済イベントの失敗からは「人にもテストにも境界がある」と学び、割引条件が爆発したときは決定表で「分岐の森」の地図を描く術を教わる。常連カズマとの関係の揺れを状態遷移図として眺めることで、人間関係にも構造があると知り、ユイは少しずつ世界を図にして扱えるテスト屋として歩き始めている。</p>
        </div>

        <h1>第7話「全部は試せない、という優しさ」</h1>

        <p>「――じゃ、今度の《魔界横断オールナイトフェス》のテスト計画、ユイリアちゃんに任せたわよん♪」</p>
        <p>オーナーのバルハが、ぎっしり書き込みだらけの企画書を置いた。</p>
        <p>BGM３種、コスチューム３種、限定メニュー３種、席配置３パターン、客層４パターン。</p>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「……多くないですか？」
        </div>
        
        <div class="dialogue">
            <span class="character-name">バルハ</span>
            「魔界の夜は盛りだくさんが正義よ☆　じゃ、よろしく～」
        </div>

        <p>カウンターの端で、ユイはノートを開く。</p>
        <p>BGM × コスチューム × メニュー × 席配置 × 客層……。</p>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「全部試そうとすると、3×3×3×3×4で……」
        </div>
        
        <p>数字を書きかけたペン先が止まる。</p>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「私、こんなにテストケース作る時間、ない……」
        </div>
        
        <p>前に教わった決定表を真似してみるが、マス目はすぐ真っ黒になり、頭の中の IF 文も一緒に爆発した。</p>
        <p>気づけば、ノートに額をつけていた。</p>

        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「ユイ、寝落ち？」
        </div>
        
        <p>ふわりと影が差し、聞き慣れた声がした。</p>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「な、ナギ先輩……」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「テストケースに轢かれた顔してるね」
        </div>
        
        <p>ナギはノートを覗き込み、びっしりの×印を見る。</p>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「全部の組合せを、全部試そうとしてる？」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「だって……どれか取りこぼしたところでバグったら、私のせいでイベントが壊れるかもって思ったら……全部やらなきゃって」
        </div>
        
        <p>自分でも情けなくて、声が小さくなる。</p>

        <p>ナギは少しだけ考える顔をしてから、ペンを取る。</p>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「ユイ、山で鉱物採集したことある？」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「ないです」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「じゃあ、想像だけ。山全部に鉱石があるとして、プロは山を全部掘らない」
        </div>
        
        <p>紙の端に、小さな山の断面図が描かれる。</p>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「地層を見て、『ここ、筋が良さそう』って場所だけ掘る。そこを"代表"にするんだ」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「代表……」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「前に同値クラスで"同じ扱いにできる塊"を見つけたでしょ。今度は、その塊同士の"組み合わせ"を見る番」
        </div>
        
        <p>ナギは因子を１列に並べる。</p>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「BGM、コスチューム、メニュー、客層。この四つが、今回の主役かな」
        </div>
        
        <p>席配置がするりと外されただけで、ページの圧迫感が少し薄れた。</p>

        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「でね、全部の組み合わせは追わない。その代わり、<span class="highlight">二つずつの組み合わせ</span>が一度は出てくるように、テストケースを選ぶ」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「二つずつ？」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「うん。BGM×コスチューム、BGM×メニュー、メニュー×客層……って、全部のペアを一度はカバーする。これを"ペアワイズテスト"って呼ぶよ」
        </div>
        
        <p>小さな表のいくつかのマスだけに印がつき、その行だけを抜き出していく。</p>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「全部の掛け算は無理。だからこそ、"起きやすい問題の多く"を拾ってくれる、筋の良いポイントを押さえる」
        </div>
        
        <p>数十行になりかけていたテストケースが、数行にまとまっていく。</p>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「……こんなに減っちゃって、大丈夫なんですか？」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「全部試さないのは、怠けじゃないよ」
        </div>
        
        <p>ナギは、穏やかな声で言う。</p>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「限られた時間と体力で、"できるだけ多くの誰か"を守るための、賢い諦め方。私たちは世界 W 全部を守るヒーローじゃないけど、ちゃんと考えて選んだテストは、その夜《∞》に来る誰かの、がっかりする未来を一つ消してくれる」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「……賢い、諦め方……」
        </div>
        
        <p>胸の重さが少し軽くなった。</p>

        <p>――イベント当日。</p>
        <p>ユイが組んだペアワイズのテストケースで事前リハを回すと、</p>
        
        <div class="math-box">
            「トランス系BGM × 覚醒エナドリ × 社畜客」
        </div>
        
        <p>の組み合わせだけ、キッチンのオーダーが異常に詰まることが分かった。</p>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「ここ、本番ではメニュー数を絞って、声かけ増やそう」
        </div>
        
        <p>ナギの一言で、運営がさっと書き換えられる。</p>

        <p>夜になり、フェスが始まる。</p>
        <p>静かなBGMのカウンター席で、社畜たちがほっと肩の力を抜いている。</p>
        <p>派手な衣装に目を輝かせる観光客。</p>
        <p>いつものカズマも、ハーブティーを片手に穏やかに笑っていた。</p>
        <p>どのテーブルでも、致命的な詰まりは起きない。</p>
        <p>（全部は試せなかった。でも――）</p>
        <p>もしあの地獄コンボを放置していたら、と想像して、ユイは背筋をひやりとさせた。</p>

        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「ありがと、ユイ」
        </div>
        
        <p>営業後、片付けをしながらナギが言う。</p>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「今日、助かった人、きっとたくさんいるよ。気づいてないだけで」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「……私のテストで、ですか？」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「うん。『全部は無理』って認めて、それでも"ここだけは守る"って選んでくれたから」
        </div>
        
        <p>その言葉が、ゆっくり胸の奥に沈んでいく。</p>

        <p>（全部は守れない。けど、私が選んだこのいくつかは、ちゃんと守れた）</p>
        <p>そう思えたとき、ユイは初めて、自分のテストが誰かの笑顔を支えている光景を、はっきり思い描けた。</p>

        <p>閉店後のフロアに、まだ微かな音楽が残っている。</p>
        <p>その音に耳を澄ませながら、ユイはペンを握り直した。</p>
        
        <div class="dialogue">
            <span class="character-name">ユイ</span>
            「……次のイベントも、"筋の良いポイント"、一緒に探してくれますか？」
        </div>
        
        <div class="dialogue">
            <span class="character-name">ナギ</span>
            「もちろん」
        </div>
        
        <p>ナギの笑顔は、少し遠くて、でも前よりずっと近く感じられた。</p>
    </div>

    <div class="footer">
        &copy; 魔界歓楽街 サキュバスメイド喫茶《∞（インフィニティ）》
    </div>

    <!-- KaTeX JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
</body>
</html>