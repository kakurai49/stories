<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第6話「関係は、状態遷移で語れる」</title>
    <link rel="stylesheet" href="pop3_style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
</head>
<body>

<a class="skip" href="#content">本文へスキップ</a>
<header class="topbar" role="banner" data-tts="ignore">
  <div class="topbar-inner">
    <a class="brand" href="index.html" aria-label="トップページへ">
      <div class="mark" aria-hidden="true"></div>
      <div class="brand-title">
        <b>結城ユイの成長物語</b>
        <span>瑠璃の宝石スタイル｜サキュバスメイド喫茶《∞》</span>
      </div>
    </a>
    <nav class="nav" aria-label="関連ナビゲーション">
      <a href="index.html#episodes">12話一覧</a>
      <a href="index.html#about">紹介</a>
      <a class="cta" href="index.html">トップへ戻る</a>
    </nav>
  </div>
</header>
  <main id="content">

    <header>
        第6話「関係は、状態遷移で語れる」
    </header>

        <section class="tts-controls" aria-label="読み上げコントロール" data-tts="ignore">
        <div class="tts-row buttons">
          <button type="button" id="speechToggle" aria-pressed="false">読み上げ OFF</button>
          <button type="button" id="speechPause" disabled aria-pressed="false">一時停止</button>
        </div>
        <label for="voicePreset">音声プリセット
            <select id="voicePreset" name="voicePreset"></select>
        </label>
        <label for="beatPreset">ビート
            <select id="beatPreset" name="beatPreset">
                <option value="calm">明るい・落ち着く</option>
                <option value="hype">テンション上げる</option>
                <option value="neutral">当たり障りない（人ビート）</option>
            </select>
        </label>
        <label for="masterVolume">音量 VOL
            <input type="range" id="masterVolume" name="masterVolume" min="0" max="1" step="0.01" value="0.85">
            <span id="masterVolumeValue">0.85</span>
        </label>
        <div class="tts-note">読み上げを開始するとビートが同時に鳴り、停止すると止まります。</div>
        <div class="tts-status">
          <span id="speechStatus" role="status" aria-live="polite">準備中...</span>
          <span id="tempoStatus" aria-live="polite"></span>
          <span id="mixStatus" aria-live="polite"></span>
          <span id="voiceSelectionStatus" aria-live="polite" class="voice-status"></span>
        </div>
    </section>


    <div class="container" id="story">
        <div class="section">
            <h2>◆前回までのあらすじ</h2>
            <p>魔界歓楽街のサキュバスメイド喫茶《∞（インフィニティ）》で見習いテストエンジニアとして働き始めた結城ユイ──ユイリアは、場当たり運営でオープン初夜を炎上させかける。そこへ現れた伝説級テストアーキテクト・神崎ナギが、クレームを三つの客パターンに整理してみせ、「テストは世界の見方を設計する仕事」だと教えてくれた。</p>
            <p>翌日、店先で通行人を観察したユイは、誰が店に入るかをことごとく外し、世界 <span class="katex">W</span> が仕様書の外側──時間帯や天気、SNS、その人の気分まで含むと知る。「見ようとした瞬間からテスター」とナギに認められ、世界をちゃんと見る一歩を踏み出す。</p>
            <p>イベント準備では、増え続ける客の属性に溺れかけるが、ナギから同値クラスの考え方を教わり、「観点しだいで同じ扱いにできる塊」が見えるようになる。社畜救済イベント本番では、踏み込みすぎたり距離を取りすぎたりして失敗するものの、「人にもテストにも境界がある」と境界値分析を重ねて聞かされ、失敗を境界探しの一歩として受け止め直す。</p>
            <p>第5話では、割引条件や時間帯などの分岐が爆発し、頭の中の IF 文で迷子になったユイに、ナギが決定表という「分岐の地図」を描いてみせた。ユイは複雑さを外に出して整理する感覚を掴みかけている。</p>
        </div>

        <div class="section">
            <h2>◆本編</h2>
            <p>夕方の《∞》に、見慣れた背広が入ってくる。社畜救済イベント以来の常連客カズマだ。ユイリアはいつものノリでしっぽを振った。</p>

            <div class="dialogue">
                <span class="character-name">ユイリア</span>
                「おかえりなさいませ〜社畜さま♡　今日も残業コンボ決めてきました？」
            </div>

            <div class="dialogue">
                <span class="character-name">カズマ</span>
                「……ああ」
            </div>

            <p>返事は短く、声は平坦。いつもなら「やめろ」と笑うのに、今日は視線がテーブルから上がってこない。</p>

            <div class="dialogue">
                <span class="character-name">ユイリア</span>
                「ご褒美ドリンク、今日は強めにしときます？　魂までとろけるやつ！」
            </div>

            <div class="dialogue">
                <span class="character-name">カズマ</span>
                「……悪い。今日は、あんまりいじらないでくれると助かる」
            </div>

            <p>ユイはあわてて頭を下げ、マニュアルどおりの笑顔で注文だけを取る。会話はそれ以上広がらず、彼は一杯飲むと、いつもより早く帰ってしまった。</p>

            <div class="scene-break">＊　＊　＊</div>

            <p>営業後、裏口の階段。ユイは膝を抱え、横で缶コーヒーを開けるナギをちらりと見る。</p>

            <div class="dialogue">
                <span class="character-name">ユイリア</span>
                「……やっぱり、やらかしましたよね」
            </div>

            <div class="dialogue">
                <span class="character-name">神崎ナギ</span>
                「カズマくんのこと？」
            </div>

            <div class="dialogue">
                <span class="character-name">ユイリア</span>
                「はい。前は“社畜さま”っていじると笑ってくれたのに、今日は明らかに刺さってて……。決定表まで作ったのに、“関係の気分”みたいなのは表にできなくて」
            </div>

            <p>ナギは少し考え、ユイのノートを開いた。</p>

            <div class="dialogue">
                <span class="character-name">神崎ナギ</span>
                「決定表は、その瞬間の条件と結果を見るには便利なんだ。でも、人や関係みたいに、時間でじわじわ変わるものは、別の見方がいい」
            </div>

            <p>ナギが丸をひとつ描き、矢印を伸ばす。</p>
            <p class="diagram">『初来店』 → 『リピーター』 → 『常連』 → 『VIP』<br>　　　　　　　　　　　　　↘<br>　　　　　　　　　　　　　『離脱』</p>

            <div class="dialogue">
                <span class="character-name">神崎ナギ</span>
                「これが関係の“状態遷移図”。丸が“今どんな状態か”。矢印が“そこからどこに行きうるか”。ログイン前→ログイン中→ログアウト、みたいな変化も、同じように描けるよ」
            </div>

            <p>さらに小さな丸が増える。</p>
            <p class="diagram">『限界社畜』 → 『ちょっと回復した常連』 → 『心が折れかけ常連』</p>

            <div class="dialogue">
                <span class="character-name">神崎ナギ</span>
                「カズマくん、今日はたぶんここだね」
            </div>

            <div class="dialogue">
                <span class="character-name">ユイリア</span>
                「“心が折れかけ常連”……」
            </div>

            <p>言葉になった途端、さっきの沈んだ目が、ただ怖いものじゃなく「そういう状態」として見え直る。</p>

            <div class="dialogue">
                <span class="character-name">神崎ナギ</span>
                「同じ“常連”でも、状態が違えば、かけていい言葉も変わる。今日ユイが投げたのは、“ちょっと回復した常連”向けのいじり方だった」
            </div>

            <div class="dialogue">
                <span class="character-name">ユイリア</span>
                「うわ……決定表、雑にまとめすぎたかもです……」
            </div>

            <p>ユイは自分の表のマスを思い出し、うなだれる。ナギは『心が折れかけ常連』から別の丸へ矢印を足した。</p>
            <p class="diagram">『心が折れかけ常連』 → 『静かに休めた常連』</p>

            <div class="dialogue">
                <span class="character-name">神崎ナギ</span>
                「次に会ったとき、“今日は静かに過ごすコースもありますよ”ってそっと出してみる。もし少しでも休めたら、状態はこっちに遷移する。そこからまた、ゆっくり別の矢印を考えればいい」
            </div>

            <div class="dialogue">
                <span class="character-name">ユイリア</span>
                「……一回ミスったら“離脱”に直行ってわけじゃないんですね」
            </div>

            <div class="dialogue">
                <span class="character-name">神崎ナギ</span>
                「人はバージョン固定じゃないからね。何度でもアップデートできる。『今どの状態にいて、どこに行きうるか』が見えると、テストしたい場面も、声のかけ方も見えてくるよ」
            </div>

            <div class="scene-break">＊　＊　＊</div>

            <p>翌晩。ドアベルが鳴り、またカズマが入ってきた。昨日と同じように疲れた顔。それでも足がここを選んでくれたことが、少しうれしい。エプロンのポケットには、自分で描いた小さな状態遷移メモが入っている。</p>
            <p>（今は“心が折れかけ常連”。ここから、“静かに休めた常連”へ、矢印を伸ばす）</p>

            <div class="dialogue">
                <span class="character-name">ユイリア</span>
                「おかえりなさいませ、カズマさん。今日は──いじられたい日ですか？　それとも、“そっとしておいてほしい日”ですか？」
            </div>

            <p>カズマがきょとんとし、やがてふっと笑う。</p>

            <div class="dialogue">
                <span class="character-name">カズマ</span>
                「……後者で、お願いします」
            </div>

            <div class="dialogue">
                <span class="character-name">ユイリア</span>
                「かしこまりました。“静かに休めた常連”コースですね」
            </div>

            <p>小声でそう確認しながら、ユイは余計な台詞を挟まず、そっとカップを置く。人の心は仕様書みたいにきれいには並ばない。それでも、丸と矢印で輪郭を描いてみると、モヤモヤが少しだけ形になる。</p>
            <p>立ちのぼる湯気の向こうで、ユイリアの小さな決意が、静かに新しい状態へと遷移していった。</p>
        </div>
    </div>
  </main>

    <div class="footer">
        © 魔界歓楽街 サキュバスメイド喫茶《∞（インフィニティ）》
    </div>

    <!-- KaTeX JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false},
                    {left: '\\(', right: '\\)', display: false},
                    {left: '\\[', right: '\\]', display: true}
                ]
            });
        });
    </script>
        <script type="module">
        import { initNarration } from "./narration.js";
        document.addEventListener("DOMContentLoaded", () => {
            initNarration();
        });
    </script>
</body>
</html>
